"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const auth_1 = require("../middleware/auth");
const adminController_1 = require("../controllers/adminController");
const adminService_1 = require("../services/adminService");
const userRepository_1 = require("../repositories/userRepository");
const limitRepository_1 = require("../repositories/limitRepository");
const stockrepository_1 = require("../repositories/stockrepository");
const orderRepository_1 = require("../repositories/orderRepository");
const transactionRepository_1 = require("../repositories/transactionRepository");
const promotionRepository_1 = require("../repositories/promotionRepository");
const userRepository = new userRepository_1.UserRepository();
const LimitRepository = new limitRepository_1.limitRepository();
const orderRepository = new orderRepository_1.OrderRepository();
const stockRepository = new stockrepository_1.StockRepository();
const promotionRepository = new promotionRepository_1.PromotionRepository();
const TransactionRepository = new transactionRepository_1.transactionRepository();
const adminController = new adminController_1.AdminController(new adminService_1.AdminService(userRepository, LimitRepository, orderRepository, stockRepository, TransactionRepository, promotionRepository));
const router = express_1.default.Router();
router.post("/adminLogin", adminController.login);
router.get("/userList", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getUserList);
router.post("/disableUser/:id", (0, auth_1.verifyTokenWithRole)("admin"), adminController.disableUser);
router.get("/stocks", adminController.getStockList);
router.get("/stocklist", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getStockList);
router.put("/softDeleteStock/:id", (0, auth_1.verifyTokenWithRole)("admin"), adminController.softDeleteStock);
router.get("/orders", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getAllOrders);
router.get("/limitorders", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getLimitOrders);
router.get("/marketorders", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getMarketOrders);
router.get("/matchedorders", adminController.getMatchedOrders);
router.get("/orderDetails/:orderId", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getOrderDetails);
router.get("/allTransactions", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getAllTransactions);
router.get("/userPortfolio/:userId", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getUserPortfolio);
router.get("/getFees", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getTotalFeesCollected);
router.post("/changeStatus/:orderId", (0, auth_1.verifyTokenWithRole)("admin"), adminController.cancelOrder);
router.post("/updateLimit", (0, auth_1.verifyTokenWithRole)("admin"), adminController.updateLimit);
router.post("/createPromotions", adminController.CreatePromotions);
router.get("/limit", (0, auth_1.verifyTokenWithRole)("admin"), adminController.getLimits);
exports.default = router;
